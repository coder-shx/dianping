团购套餐
平台支持商户发布团购套餐，用户可在商户详情页查看这些套餐，并发起下单。下单成功后，用户可持套餐券码前往指定门店进行消费。
页面入口与展示
在商户详情页，应展示该商户当前在售的团购套餐列表。点击每个套餐项可进入套餐详情页面。
详情界面应展示套餐的标题、价格、描述、套餐所含内容、销量信息和立即购买的按钮。
用户提交下单
用户点击“立即购买”按钮后，即发起下单，此时必须处于已登录状态。下单时需要确认以下信息：
展示套餐标题和价格，供用户确认。
下单时可以最多选择一张优惠券使用，进入下单界面时，系统应默认为用户选择可使用的优惠券中减免金额最高的一张，但用户可以自由更换为其他可用优惠券，或选择不使用。见优惠券。
确认下单后，无需实现支付功能，订单即视为购买成功。系统应将该套餐的销量 +1。
查看套餐券码
用户购买成功后，系统应立即跳转至“券码界面”。每笔成功订单会生成一个券码，券码为随机的16位数字；需要在界面上展示16位数字，还要展示由16位数字生成的二维码，方便商户验券。券码应具备唯一性，且与该订单关联。
我的订单
用户还可通过我的订单入口，查看购买过的所有团购套餐订单。每个订单项需展示套餐标题、下单时间、使用门店；用户点击任意订单项，可进入对应的券码详情页，查看券码和二维码。
本次 Lab 不会涉及的部分
商户端上架或下架团购套餐
购物车及多商品合并下单的情况
到店核销、券码使用等逻辑
实际支付流程
套餐库存控制
优惠券
平台支持向用户发放多种类型的优惠券，用户在下单时可选择使用一张已领取的优惠券抵扣订单金额。优惠券发放后将进入用户卡包，符合使用条件时可在订单页面中选择使用。
优惠券定义与属性
属性名
说明
标题
必填，显示在列表/卡包中的名称，例如“新人券满100减20”。
说明
选填，优惠券的描述或使用规则。
类型及详情
必填，优惠券需要实现以下三种类型，每种优惠券的类型如下：
减固定金额（如满100减20、5元无门槛券）
减到固定金额（如0元免单券、0.1元秒杀券）
折扣券（如整单9.5折券，满300打7折券）
使用门槛
选填，如“满100可用”，也可为空表示无门槛。
最大抵扣金额
选填，如果是折扣券或减到固定金额券，可以设置最多减多少。
例如：
一张“6折券”可以设置“最多抵扣20元”。
一张“15元内免单券”表示“订单金额在15元以内免费，超过部分由用户自付”。
适用条件
选填，需要实现以下两种限制，每种券最多设置其中一种：
适用品类：单选，如“火锅”、“西餐”、“奶茶”等。
适用店铺：单选，如“KFC南区店”等。
未设置则表示通用券，可在任意场景下使用。
失效时间
选填，需实现以下三种设置方式，每种券只能设置其中一种：
截止日期：固定到某天的23:59，例如“2025/6/30 23:59”。
有效时间：领取后一段时间有效，例如领取后7天有效、领取后1小时内有效。
空表示无限期。
发放总量
选填，整体发放张数，如10000张，空表示不限量。
每人最多领取张数
选填，限制每个用户最多可领取的张数，防止刷券行为。
优惠券的发放
本次 Lab 中优惠券的发放方式见新人优惠券发放。发放与领取时需注意发放总量和每人最多领取张数。Lab4 中可能会扩展更多的发券方式，在设计上需要注意通用性。
优惠券的使用
用户在下单过程中可选择是否使用已领取的优惠券。系统需遵循以下使用规则：
每笔订单最多仅可使用一张优惠券；
下单金额需满足该优惠券的使用门槛（如“满100元可用”）；
优惠券类型需与订单适配（如指定门店、指定品类）；
一张优惠券一经使用即视为已使用，不可重复使用。
使用的优惠券需在有效期内。
优惠券的展示
用户可在“我的卡包”中查看自己已领取的所有优惠券。卡包页面需将优惠券按状态分类展示，包括未使用、已使用、已过期。每张优惠券应在卡包中展示优惠券标题、折扣力度（如“立减20元”、“9折券”等）、有效期提示、使用限制。
本次 Lab 中不会涉及的内容
多张优惠券叠加使用
新人优惠券发放
“小众点评”上线已有一段时间，用户活跃度却不如预期。为了摆脱“点评界隐士”的称号，产品运营决定祭出大额新人券——烧钱买热闹，总比没人来好。
未使用“小众点评”购买过团购套餐的用户，可以通过首页“领取新人券”的明显按钮进入领取界面。
新用户可从三种券中任选一张领取，领取之后可通过我的卡包查看，在购买团购套餐时抵扣：
新人KFC9折券：满10元可用、整单9折券、仅限KFC南区店使用、领取后7天内有效、发放总量10000张、每个用户限领一张。
新人奶茶免单券：无门槛免单券、最高抵扣15元、适用品类：奶茶、领取后7天内有效、发放总量100张、每个用户限领一张。
新人100元优惠券：满200减100元券、全品类通用、领取后1天内有效、发放总量1张 （来自运营的坏笑😉）、每个用户限领一张。
技术部分
本次 Lab 主要是对软件设计和体系结构单元的实践。
我们选取了一些在互联网产品中较为常见、但业务逻辑相对复杂的功能作为练习场景，以贴近真实开发环境。需求部分的描述均从产品视角出发，即围绕“用户可以看到什么、做什么”展开说明。作为软件工程师的第一步，便是将这些面向用户的业务需求，逐步转化为可落地的系统设计与技术实现方案。
设计模式
设计模式提供了一套可复用的“思考框架”，它们来源于真实开发中的经验总结，帮助我们解决模块耦合、逻辑分散、职责不清、扩展困难等常见问题。
在本次实验中，你不会直接看到“请使用某某模式”的明确要求。相反，我们会通过一些“设计上的困境”引导你思考：是否可以通过某种通用的结构方式，让系统变得更好？
💡 困境一：订单完成后，如何通知其他模块？
当用户成功下单后，订单模块完成了核心流程：校验信息 → 创建订单 → 生成券码 → 返回结果。但与此同时，系统还需完成一系列与订单紧密相关但属于其他业务域的逻辑，例如：
优惠券模块：如本次订单使用了优惠券，需将该券标记为“已使用”，避免重复使用；
销量统计模块：下单成功后，对应套餐的销量应自动 +1。
未来可能还会有更多模块由下单触发。
这些后续动作虽然由订单触发，但并不属于订单模块的职责范围。如果将这些逻辑直接写在订单创建流程中，代码将变得臃肿，且模块之间高度耦合，不利于维护与扩展。
是否存在一种方式，可以让订单模块在完成自身工作的同时，将“其他模块需要做的事”交由它们各自处理，而不是直接在订单模块中硬编码调用它们？
💡 困境二：不同类型的优惠券，如何统一处理？
在下单过程中，用户可以选择使用一张优惠券抵扣订单金额。但你会发现，优惠券并非统一逻辑，它们之间的差异非常大：
有的优惠券是满减券，例如“满100减20”，只在订单金额超过门槛时才生效；
有的是免单券，比如“0.1元秒杀券”或“15元内全免”，订单价格将被强制减到某个上限；
还有的是折扣券，如“整单9折”、“满300打7折”，需要根据订单金额计算折扣，并可能设置最大抵扣金额；
尽管它们看起来都叫“优惠券”，但底层逻辑并不相同。如果你将所有类型的计算方式写在一个方法中，那这个方法可能会变成这样：
这样的代码会不断膨胀，难以维护，更不利于未来添加新类型的优惠券。
是否存在一种方式，可以将不同类型的优惠逻辑抽象成一套统一的接口结构，并在运行时根据优惠券类型，选择对应的处理方法？
💡 困境三：优惠券的字段很多，该如何安全地构造一张券？
在系统中，每张优惠券都包含丰富的属性字段，例如：标题、说明、使用门槛、最大抵扣金额等。其中，有些字段是必填项（如标题、类型），有些是可选项。
如果直接通过构造函数来创建一张优惠券，你可能会面临这样的问题：
构造函数参数太多，阅读困难，容易传错；
不同类型的券需要的字段不同，导致字段混乱；
你会如何设计一个更安全、更灵活、更清晰的对象构建方式，让构造一张优惠券变得自然、易读、可控？
💡 困境四：优惠券使用前，如何进行一系列校验？
在下单过程中，系统必须在使用前对优惠券进行一系列校验，例如：
是否已过期？
是否满足使用门槛？ 如“满100元可用”，订单金额是否达标；
是否已被使用？ 一张券只能用一次；
是否适用该订单？ 比如只适用于某一类商品或某一家门店；
在真实世界中可能会有更多校验（例如国家补贴限地区、APP专用券限制下单渠道等）
你可能会考虑写一个大方法，把这些条件一个个检查：
但很快你会发现，校验逻辑越加越多，代码也变得越发臃肿。更麻烦的是每当要新增一种新校验规则，比如“限APP使用”或“仅限会员使用”，你就不得不打开原方法、插入新代码，打破了原有结构，也增加了出错风险。
是否存在一种方式，可以将每种校验规则拆解成“单独的模块”，并像搭积木一样灵活组合？同时可以让校验流程按顺序依次执行，一旦失败就中断，而不需要维护一个庞大的 if-else 链？
提交时间与提交内容
Lab3 的最晚提交时间为 5月7日（周三）23:59.
Lab3 的提交内容为 代码仓库 + 说明文档。
Lab3 需要提交以下内容：
将代码提交到华为云的代码托管平台。
在 eLearning 上提交一份说明文档，需要包括以下内容：
简要说明分别通过哪种设计模式、经过怎样的设计，解决了上述四个困境。可以通过文字、示意图、代码截图结合的方式说明，无需写的太长。
助教将通过查看代码与文档、与小组同学问答及现场演示（另约时间）的方式进行评分。
评分细则
⚠️ 现场演示说明
评分以最晚提交时间前的 远程Git仓库 中的代码版本为准。
现场演示过程中，如因环境或配置问题导致项目无法正常运行，可允许调试；但不得修改代码本身。
若现场对代码进行修改，则该修改版本将不计入评分，仅以原始提交版本为准。
评分项
评分标准
满分
【设计模式】解决困境1-订单通知
选用合适的设计模式，通过结构清晰、职责分明的设计解决该问题；并能够通过清晰的说明，准确阐述所用模式的原理与应用效果。
6
【设计模式】解决困境2-多样的优惠券
选用合适的设计模式，通过结构清晰、职责分明的设计解决该问题；并能够通过清晰的说明，准确阐述所用模式的原理与应用效果。
6
【设计模式】解决困境3-构造优惠券
选用合适的设计模式，通过结构清晰、职责分明的设计解决该问题；并能够通过清晰的说明，准确阐述所用模式的原理与应用效果。
6
【设计模式】解决困境4-优惠券校验
选用合适的设计模式，通过结构清晰、职责分明的设计解决该问题；并能够通过清晰的说明，准确阐述所用模式的原理与应用效果。
6
【页面展示】商户详情页
展示商户当前在售的团购套餐列表，点击每个套餐项可进入套餐详情页面
3
【页面展示】团购套餐详情页
展示套餐的标题、价格、描述、套餐所含内容、销量信息和“立即购买”按钮
3
【下单功能】用户发起下单
用户点击“立即购买”按钮后，即发起下单，此时必须处于已登录状态
2
【下单功能】下单信息确认
用户下单时，页面需展示套餐标题、套餐价格和可用优惠券，同时为用户提供“确认下单”按钮
3
【下单功能】优惠券使用张数
下单时每笔订单最多可以选择一张优惠券使用
2
【下单功能】下单时默认优惠券
进入下单页面时，系统应默认为用户选择可使用的优惠券中减免金额最高的一张
3
【下单功能】下单时可以更换优惠券
用户在系统选择默认优惠券的基础上，可以自由更换为其它可用优惠券，同时支持用户选择不使用优惠券
2
【下单功能】订单购买
用户确认下单后，无需实现支付功能，订单即视为购买成功，系统在套餐详情页将该套餐的销量+1
2
【套餐券码】页面跳转
用户购买成功后，系统需要立即跳转至“券码界面”
2
【套餐券码】券码生成
每笔成功订单会生成一个券码，券码为随机的16位数字，需要在界面上展示16位数字以及由16位数字生成的二维码。券码必须具有唯一性，且与该订单关联
6
【订单展示】订单查询入口
用户通过“我的订单”入口，查看购买过的所有团购套餐订单
2
【订单展示】订单项展示
每个订单项需要展示套餐标题、下单时间、使用门店；用户点击任意订单项，显示由16位数字生成的二维码
5
【优惠券】优惠券定义与属性
每张优惠券必须满足lab3要求中“优惠券定义与属性”
6
【优惠券】优惠券使用规则
用户下单时使用优惠券必须满足lab3要求中“优惠券的使用”
6
【优惠券】优惠券展示入口
用户可以在“我的卡包”中查看自己已领取的所有优惠券
2
【优惠券】优惠券分类展示
卡包页面需将优惠券按状态分类展示，包括未使用、已使用、已过期。每张优惠券应在卡包中展示优惠券标题、折扣力度（如“立减20元”、“9折券”等）、有效期提示、使用限制
6
【优惠券】新用户优惠券发放
未使用“小众点评”购买过团购套餐的用户，可以通过首页“领取新人券”的明显按钮进入领取界面。新用户领取优惠券时必须符合lab3要求中“新人优惠券发放”规则
5
【用户管理】切换用户
系统必须具备用户登录、登出、注册功能
3
【页面美观】前端页面
前端页面布局美观、合理
3
【Git】提交信息规范
每次提交均使用规范的 Git Commit Message
3
【Git】仓库文件规范
设置了.gitignore文件，仓库内容整洁，未提交无关内容，如node_modules、venv、Maven等依赖库或虚拟环境等
2
【Git】分支管理与开发流程
Lab1 至 Lab2和Lab3 的 Git 提交历史清晰、结构合理。即遵循 GitFlow 的流程，如 feature/hotfix/develop 等分支规范进行开发
5

